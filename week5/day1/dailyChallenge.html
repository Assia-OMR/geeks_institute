<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Daily Challenge : Play with Words</title>
        
    </head>
    <body>
        <script>
            /*__________________________*/
               /*1st Daily Challenge*/
            /*__________________________*/
            function makeAllCaps(words) {
                return new Promise((resolve, reject) => {
                    if (words.every(word => typeof word === "string")) {
                    resolve(words.map(word => word.toUpperCase()));
                    } else {
                    reject("Error: Not all items are strings");
                    }
                });
            }

            function sortWords(words) {
                return new Promise((resolve, reject) => {
                    if (words.length > 4) {
                    resolve(words.sort());
                    } else {
                    reject("Error: Array length is not bigger than 4");
                    }
                });
            }

            // Tests
            makeAllCaps([1, "pear", "banana"])
            .then(arr => sortWords(arr))
            .then(result => console.log(result))
            .catch(error => console.log(error));

            makeAllCaps(["apple", "pear", "banana"])
            .then(arr => sortWords(arr))
            .then(result => console.log(result))
            .catch(error => console.log(error));

            makeAllCaps(["apple", "pear", "banana", "melon", "kiwi"])
            .then(arr => sortWords(arr))
            .then(result => console.log(result))
            .catch(error => console.log(error));


            /*__________________________*/
               /*2nd Daily Challenge*/
            /*__________________________*/

            const morse = `{
                "0": "-----",
                "1": ".----",
                "2": "..---",
                "3": "...--",
                "4": "....-",
                "5": ".....",
                "6": "-....",
                "7": "--...",
                "8": "---..",
                "9": "----.",
                "a": ".-",
                "b": "-...",
                "c": "-.-.",
                "d": "-..",
                "e": ".",
                "f": "..-.",
                "g": "--.",
                "h": "....",
                "i": "..",
                "j": ".---",
                "k": "-.-",
                "l": ".-..",
                "m": "--",
                "n": "-.",
                "o": "---",
                "p": ".--.",
                "q": "--.-",
                "r": ".-.",
                "s": "...",
                "t": "-",
                "u": "..-",
                "v": "...-",
                "w": ".--",
                "x": "-..-",
                "y": "-.--",
                "z": "--..",
                ".": ".-.-.-",
                ",": "--..--",
                "?": "..--..",
                "!": "-.-.--",
                "-": "-....-",
                "/": "-..-.",
                "@": ".--.-.",
                "(": "-.--.",
                ")": "-.--.-"
            }`;

            // 1. Convert JSON string to JS object
            function toJs() {
                return new Promise((resolve, reject) => {
                    const morseJS = JSON.parse(morse);
                    if (Object.keys(morseJS).length === 0) {
                    reject("Error: Morse object is empty");
                    } else {
                    resolve(morseJS);
                    }
                });
            }

            // 2. Convert user input to Morse array
            function toMorse(morseJS) {
                return new Promise((resolve, reject) => {
                    const userInput = prompt("Enter a word or sentence:").toLowerCase();
                    const morseArr = [];

                    for (let char of userInput) {
                    if (morseJS[char]) {
                        morseArr.push(morseJS[char]);
                    } else {
                        reject(`Error: Character '${char}' not found in Morse code`);
                        return;
                    }
                    }

                    resolve(morseArr);
                });
            }

            // 3. Display Morse code on the page
            function joinWords(morseTranslation) {
                const result = morseTranslation.join("\n");
                document.body.innerText = result;
            }

            
            toJs()
            .then(result => toMorse(result))
            .then(morseArr => joinWords(morseArr))
            .catch(error => console.log(error));

        </script>

        
    </body>
</html>
